# Plotting Configuration Tooltips - Product Requirements Document

## 0. Executive Summary

- **Feature:** Add contextual tooltips to every plotting configuration control within the pandastable Plot Viewer GUI.
- **Priority:** High – reduces configuration errors and improves discoverability of advanced options.
- **Effort:** Medium (≈1 day) covering requirements curation plus implementation.
- **Status:** Ready for implementation.

---

## 1. Problem Statement & Goals

Power users rely on the Plot Viewer to configure dozens of matplotlib, shmoo, bathtub, and specialty plot options. New or infrequent users struggle to understand what each control does, leading to trial-and-error workflows and support questions. The GUI currently contains sporadic helper text (only a few comboboxes wire up tooltips) leaving most controls undocumented.

### Goals

1. Provide concise, descriptive tooltip copy for 100% of plotting configuration widgets (Base Options tabs, grid layout dialog, annotation/extra options, etc.).
2. Ensure tooltip rendering is consistent across widget types (Entry, Combobox, Scale, Checkbutton, etc.).
3. Author copy that reflects practical plotting behavior (unit expectations, side effects, defaults) with tone consistent with existing docs.
4. Keep implementation extensible so future options can declare tooltip text in one place.

### Non-goals

- Writing extensive multi-paragraph help text (keep ≤120 characters when possible).
- Redesigning layouts or introducing new option groups.
- Internationalization of tooltip strings.

---

## 2. Users & User Stories

1. **Data Scientist configuring density plots**  \
   *"As a new user, I want every slider and checkbox to explain its effect so I can quickly dial-in visuals without guessing."*
2. **Validation Engineer building shmoo plots**  \
   *"When I revisit uncommon options (e.g., contour controls), I need on-hover reminders instead of referencing PDFs."*
3. **Support/QA engineer**  \
   *"I need consistent tooltip coverage to reduce support tickets citing confusing controls."*

---

## 3. UX Requirements

1. **Coverage:** Every widget generated by `dialogFromOptions` or custom option dialogs (AnnotationOptions, LayoutOptions, ExtraOptions, etc.) must receive tooltip text.
2. **Copy Source:** Tooltip strings are defined in option metadata (`opts` dict entries) using a shared `tooltip` key to keep definitions close to configuration logic.
3. **Consistency:** Tooltips appear within 250 ms on hover, use existing `ToolTip` styling, and disappear on mouse leave.
4. **Accessibility:** Ensure scrollable canvases still allow hover detection (no masking by transparent overlays). Tooltips must not obstruct critical controls (existing offset is acceptable).
5. **Fail-safe:** Missing tooltip metadata should not crash UI; widgets simply omit tooltips.

---

## 4. Functional Requirements

| ID | Requirement |
|----|-------------|
| FR1 | Extend `dialogFromOptions` to attach tooltips for every widget type (Entry, Checkbutton, Combobox, Listbox, Scale, Spinbox, Color button, etc.) when `tooltip` metadata exists. |
| FR2 | Audit and populate tooltip strings for all plotting-related option dictionaries (`MPLBaseOptions`, `ExtraOptions`, `AnimateOptions`, `AnnotationOptions`, `PlotLayoutOptions`, etc.). |
| FR3 | Add descriptive metadata to grid/annotation dialogs that use custom widgets outside `dialogFromOptions` (e.g., `PlotLayoutGrid`, manual buttons) so they also expose ToolTips. |
| FR4 | Ensure tooltip strings are human-readable, action-oriented, and concise; leverage domain-specific phrasing where necessary (Nyquist, BER, etc.). |
| FR5 | Provide at least one regression/unit test or manual verification checklist confirming tooltips attach successfully for representative widget types. |

---

## 5. Technical Approach

1. **Widget plumbing**
   - Centralize tooltip binding inside `dialogFromOptions` immediately after widget creation for all widget classes.
   - Add helper `maybe_add_tooltip(widget, opt)` to avoid duplicate code and to skip if no tooltip provided.
2. **Option metadata updates**
   - For each option dict (MPLBaseOptions, ExtraOptions, LayoutOptions, AnnotationOptions, AnimateOptions, 3D options, etc.), add a `tooltip` string using concise copy.
   - Leverage shared helper dictionaries/constants where text repeats (e.g., axis toggles).
3. **Custom dialogs**
   - Where widgets are created manually (PlotLayoutGrid controls, annotation Create/Clear buttons, Plot Layout sliders), call the helper to attach tooltips.
4. **Testing/Verification**
   - Manual smoke test: open Plot Viewer, hover representative widgets from each tab, confirm tooltip text appears.
   - (Optional) Add lightweight automated check ensuring every option dict entry includes `tooltip`.

---

## 6. Acceptance Criteria

- [ ] Hovering over any control in the plotting configuration GUI displays meaningful tooltip text.
- [ ] No regressions to dialog layout, scrolling, or widget creation.
- [ ] Tooltip copy reviewed for clarity and typos.
- [ ] Documentation (CHANGELOG / quick reference) highlights tooltip availability.

---

## 7. Dependencies & Risks

- Relies on existing `ToolTip` helper (already in `pandastable.dialogs`).
- Risk: copy fatigue leading to inconsistent tone. Mitigation: reuse phrasing patterns, peer review.
- Risk: performance impact negligible; tooltips instantiate lightweight wrappers.

---

## 8. Milestones

| Milestone | Description | Owner | ETA |
|-----------|-------------|-------|-----|
| M1 | Implement tooltip plumbing helper + coverage for widgets | Dev | Day 0 AM |
| M2 | Populate tooltip metadata for all existing option sets | Dev | Day 0 PM |
| M3 | Verification + docs | Dev | Day 1 |

---

## 9. Open Questions

1. Should tooltips include default values? (Current stance: only when clarifying units.)
2. Need ability to disable tooltips globally? (Out of scope unless user feedback requests.)
3. Future: add keyboard-accessible help (e.g., focus-triggered). Not required now.
